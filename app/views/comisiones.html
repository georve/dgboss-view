<div class="right_col" role="main" ng-controller="comisionesController as comisionesCtrl">

  <div class="comisionConsultarVer" ng-click="comisionesCtrl.verPoliza()"></div>
  <div class="comisionConsultarAgregar" ng-click="comisionesCtrl.agregar()"></div>

  <!-- ********************************************************************************************************
  *************************************************************************************************************
  **                                                 VER COMISION                                            **
  *************************************************************************************************************
  ********************************************************************************************************* -->

  <div class="modal fade comisionVer" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="myModalLabel">Datos de la póliza</h4>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-striped jambo_table" style="margin-bottom: 0px;">
            <thead>
              <tr class="headings">
              <th class="column-title text-center"colspan="2">Datos generales</th>
              </tr>
            </thead>

            <tbody>
              <tr class="even pointer">
              <td class="textRight" style="width: 50%"><b>Número de póliza</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.numeroPoliza ? comisionesCtrl.comisionVerModal.numeroPoliza : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Tomador </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.numeroRifAseguradoTomador ? comisionesCtrl.comisionVerModal.numeroRifAseguradoTomador : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Asegurado</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.numeroRifAsegurado ? comisionesCtrl.comisionVerModal.numeroRifAsegurado : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Documento de identidad</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.identificacion ? comisionesCtrl.comisionVerModal.identificacion : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Aseguradora</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.numeroRifAseguradora ? comisionesCtrl.comisionVerModal.numeroRifAseguradora : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Prima </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.totalPrima ? comisionesCtrl.comisionVerModal.totalPrima : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Moneda </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.idMoneda ? comisionesCtrl.comisionVerModal.idMoneda : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Fecha de inicio</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaInicio ? comisionesCtrl.comisionVerModal.fechaInicio : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Fecha de fin</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaFin ? comisionesCtrl.comisionVerModal.fechaFin : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Fecha de suscripción</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaSuscripcion ? comisionesCtrl.comisionVerModal.fechaSuscripcion : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Fecha de vencimiento</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaVencimiento ? comisionesCtrl.comisionVerModal.fechaVencimiento : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Vigencia desde </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaVigenciaInicio ? comisionesCtrl.comisionVerModal.fechaVigenciaInicio : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Vigencia hasta </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.fechaVigenciaFin ? comisionesCtrl.comisionVerModal.fechaVigenciaFin : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Frecuencia de pago</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.idFrecuenciaPago ? comisionesCtrl.comisionVerModal.idFrecuenciaPago : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Tipo de movimiento</b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.tipoPago ? comisionesCtrl.comisionVerModal.tipoPago : 'N/A'}}</td>
              </tr>
              <tr class="odd pointer">
              <td class="textRight"><b>Ramo </b></td>
              <td class=" ">{{comisionesCtrl.comisionVerModal.opcionRamo ? comisionesCtrl.comisionVerModal.opcionRamo : 'N/A'}}</td>
              </tr>
            </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer textCenter">
          <button type="button" class="btn btn-default" data-dismiss="modal"  ng-click="comisionesCtrl.setObjectElems(comisionesCtrl.tipoPoliza, false)" >Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ********************************************************************************************************
  *************************************************************************************************************
  **                                                ELIMINAR PRODUCTOR                                       **
  *************************************************************************************************************
  ********************************************************************************************************* -->

  <div class="modal fade eliminarItemModal" tabindex="-1" role="dialog" aria-hidden="true" >
   <div class="modal-dialog modal-lg">
     <div class="modal-content">

      <div class="modal-header text-center">
        <h4 class="modal-title" id="myModalLabel">¡Advertencia!</h4>
      </div>

      <div class="modal-body">
        <h5 class="text-center">¿Está seguro que desea eliminar "<b>{{comisionesCtrl.itemEliminar.ejecutivo}}</b>"?</h5>
        </br>
        <div class="row text-center">
          <button type="button" class="btn btn-success col-md-2 col-md-offset-4" data-dismiss="modal" ng-click="comisionesCtrl.eliminarComision2('aceptar')">Aceptar</button>
          <button type="button" class="btn btn-primary col-md-2" data-dismiss="modal" ng-click="comisionesCtrl.eliminarComision2('cancelar')">Cancelar</button>
        </div>
      </div>
     </div>
   </div>
  </div>

  <!-- ********************************************************************************************************
  *************************************************************************************************************
  **                                                 AGREGAR COMISIONES                                      **
  *************************************************************************************************************
  ********************************************************************************************************* -->

    <div class="animateFade" ng-show="comisionesCtrl.views.editarComision">
      <!-- <div class="page-title">
        </br>
      </div> -->
      <div class="x_panel">
        <div class="x_title">
          <h2>Agregar comisiones <small>Proceso para agregar comisiones a una póliza sin comisión asociada.</small></h2>
          <!-- <ul class="nav navbar-right custom_panel_toolbox">
            <li><a class="comision collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
          </ul> -->
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class = "col-md-10 col-sm-10 col-xs-10 col-md-offset-1 col-sm-offset-1 col-xs-offset-1">
              <table style="margin-bottom: 10px" class="table table-striped jambo_table bulk_action">
                <thead>
                  <tr class="headings">
                    <th class="text-center">Número de póliza</th>
                    <th class="text-center">Ramo</th>
                    <th class="text-center">Aseguradora</th>
                    <th class="text-center">Moneda</th>
                    <th class="text-center">Monto Recibo</th>
                    <th class="text-center">Monto comisión</th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.numeroPoliza}}</td>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.coRamo}}</td>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.nbAseguradora}}</td>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.nbMoneda}}</td>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.recibos.montoRecibo}}</td>
                    <td class="text-center">{{comisionesCtrl.comisionEditar.recibos.comision.montoComision}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="clearfix"></div>
            </br>
            <form id="formularioAgregarComision" data-parsley-validate class="form-horizontal form-label-left">
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Productor <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input id="formularioAgregarComisionEjecutivodecuentas" type="text" class="form-control has-feedback-left col-md-7 col-xs-12 autocompletarIDComisiones " ng-model="comisionesCtrl.comisionAgregar.ejecutivo" required="required" maxlength="32" placeholder="Productor">
                  <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                </div>
              </div>

              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Porcentaje <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12 has-feedback">
                  <input id="formularioAgregarComisionPorcentaje" type="text" class="form-control has-feedback-left" ng-model="comisionesCtrl.comisionAgregar.porcentaje" ng-blur="comisionesCtrl.calularComision()" placeholder="Porcentaje" data-validate-length-range="1" required="required" ui-mask="9?9?9?9?9?%"  ui-mask-placeholder ui-mask-placeholder-char="space">
                  <!--ui-options ="{ '9': /\d/}"-->
                  <span class="fa fa-pie-chart form-control-feedback left" aria-hidden="true"></span>
                </div>
              </div>

              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Monto <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12 has-feedback">
                  <input id="formularioAgregarComisionMonto" type="text" ui-number-mask="2" class="form-control has-feedback-left" ng-model="comisionesCtrl.comisionAgregar.monto" ng-blur="comisionesCtrl.calularPorcentaje()" placeholder="Monto" data-validate-length-range="1" required="required">
                  <span class="fa fa-money form-control-feedback left" aria-hidden="true"></span>
                </div>
              </div>
              <div class="item form-group animateFade">
                <label class="control-label col-md-3 col-sm-3 col-xs-12">Fecha de pago</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="">
                    <a class="dropdown-toggle" id="fechaPagoComi" role="button" data-toggle="dropdown" data-target="#">
                      <div class="no-margin-bottom" required="required">
                        <input readonly="readonly"  id="formularioAgregarFechaComision" type="text" name="date" class="form-control has-feedback-left"
                          data-ng-model="comisionesCtrl.comisionAgregar.fechaPago" placeholder="Fecha de pago">
                        <span class="fa fa-calendar form-control-feedback left" aria-hidden="true"></span>
                      </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                      <datetimepicker 
                      data-ng-model="comisionesCtrl.comisionAgregar.fechaPago" 
                      data-on-set-time="comisionesCtrl.cambiarFecha('formularioAgregarFechaComision',comisionesCtrl.comisionAgregar.fechaPago,comisionesCtrl.comisionAgregar.fechaCarga);comisionesCtrl.startDateOnSetTime('formularioAgregarFechaCargaComision')"
                      data-before-render="comisionesCtrl.setStarDate($dates); comisionesCtrl.startDateBeforeRender($dates)"
                      data-datetimepicker-config="{ 
                        dropdownSelector: '#fechaPagoComi', 
                        startView:'day', minView:'day', 
                       modelType: 'DD-MM-YYYY',
                        renderOn:'formularioAgregarFechaComision'}"></datetimepicker>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="item form-group animateFade" ng-hide="comisionesCtrl.comisiones.length > 0">
                <label class="control-label col-md-3 col-sm-3 col-xs-12">Fecha de carga</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="">
                    <a class="dropdown-toggle" id="fechaCargaComi" role="button" data-toggle="dropdown" data-target="#">
                      <div class="no-margin-bottom" required="required">
                        <input readonly="readonly"  id="formularioAgregarFechaCargaComision" type="text" name="date" class="form-control has-feedback-left"
                          data-ng-model="comisionesCtrl.comisionAgregar.fechaCarga" placeholder="Fecha de carga">
                        <span class="fa fa-calendar form-control-feedback left" aria-hidden="true"></span>
                      </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                      <datetimepicker 
                      data-ng-model="comisionesCtrl.comisionAgregar.fechaCarga" 
                      data-on-set-time="comisionesCtrl.cambiarFecha('formularioAgregarFechaCargaComision',comisionesCtrl.comisionAgregar.fechaPago,comisionesCtrl.comisionAgregar.fechaCarga); comisionesCtrl.endDateOnSetTime('formularioAgregarFechaComision')" 
                      data-before-render="comisionesCtrl.setStarDate($dates); comisionesCtrl.endDateBeforeRender($view, $dates, $leftDate, $upDate, $right)" 
                      data-datetimepicker-config="{ 
                        dropdownSelector: '#fechaCargaComi', 
                        startView:'day', minView:'day', 
                       modelType: 'DD-MM-YYYY',
                        renderOn:'formularioAgregarFechaCargaComision' }"></datetimepicker>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Estatus <span class="required">*</span></label>
                <div class="col-md-6 col-sm-6 col-xs-12 required" data-validate-length-range="3" required="required" type="text">
                  <select class="form-control" ng-model="comisionesCtrl.comisionAgregar.estatus">
                    <option value="">Seleccione..</option>
                    <option value="1">Pendiente</option>
                    <option value="2">Pagado</option>
                  </select>
                </div>
              </div>
              </br>
              <div style="margin-top: 8px" class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3 col-sm-offset-3 col-xs-offset-3">
                <button type="button" class="btn btn-success col-sm-3 col-sm-offset-3 col-md-3 col-md-offset-3 col-xs-3 col-xs-offset-3" ng-click="comisionesCtrl.agregarComision()">Agregar</button>
                <button type="button" class="btn btn-primary col-sm-3 col-md-3 col-xs-3" ng-click="comisionesCtrl.cancelarComision()" ng-show = "comisionesCtrl.comisiones.length == 0">Cancelar</button>
              </div>
            </form>

            </br>

            <div class="table-responsive animateFade" style="margin-top: 5px" ng-show="comisionesCtrl.comisiones.length > 0">
              <table id="tablaComisionesProductor" style="margin-bottom: 10px" class="table table-striped jambo_table bulk_action">
                <thead>
                  <tr class="headings">
                    <th class="text-center">Nombre</th>
                    <th class="text-center">Porcentaje</th>
                    <th class="text-center">Comisión</th>
                    <th class="text-center">Fecha de pago</th>
                    <th class="text-center">Fecha de carga</th>
                    <th class="text-center">Estatus</th>
                    <th class="text-center">Acción</th>
                  </tr>
                </thead>

                <tbody>
                  <tr ng-repeat="comision in comisionesCtrl.comisiones">
                    <td class="text-center">{{comision.ejecutivo}}</td>
                    <td class="text-center">{{comision.porcentaje}}%</td>
                    <td class="text-center">{{comision.monto}}</td>
                    <td class="text-center">{{comision.fechaPago}}</td>
                    <td class="text-center">{{comision.fechaCarga}}</td>
                    <td class="text-center">{{(comision.estatus == "2") ? "Pagado" : "Pendiente" }}</td>
                    <td class="text-center">
                      <a class="cursor-pointer" ng-click="comisionesCtrl.editarComisionFn(comision)">
                        <i class="fa fa-pencil"></i>
                      </a>
                      <a class="cursor-pointer" ng-click="comisionesCtrl.eliminarComisionFn(comision)">
                        <i class="fa fa-trash-o"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
              </br>
              <div style="margin-bottom: 5px" class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3 col-sm-offset-3 col-xs-offset-3">
                <button type="button" class="btn btn-success col-sm-3 col-sm-offset-3 col-md-3 col-md-offset-3 col-xs-3 col-xs-offset-3" ng-click="comisionesCtrl.guardarComision()">Guardar</button>
                <button type="button" class="btn btn-primary col-sm-3 col-md-3 col-xs-3" ng-click="comisionesCtrl.cancelarComision()">Cancelar</button>
              </div>
            </div>
        </div>
      </div>
    </div>
  <!-- ********************************************************************************************************
  *************************************************************************************************************
  **                                               CONSULTAR  COMISIONES                                     **
  *************************************************************************************************************
  ********************************************************************************************************* -->
  <div ng-show="comisionesCtrl.views.listarComisiones" class="x_panel">
      <!-- <div class="page-title">
        </br>
      </div>
    <div class="x_panel"> -->
      <div class="x_title">
        <h2 ng-show="!comisionesCtrl.editComi">Consultar pólizas sin Comisiones<small>Consulta de pólizas sin comisiones, asignación de comisiones.</small></h2>
        <h2 ng-show="comisionesCtrl.editComi">Consultar pólizas con Comisiones<small>Consulta de pólizas con comisiones.</small></h2>
        <!-- <ul class="nav navbar-right custom_panel_toolbox">
          <li><a class="comision collapse-link"><i class="fa fa-chevron-up"></i></a>
          </li>
        </ul> -->
        <div class="clearfix"></div>
      </div>

      <div class="x_content">
        <!-- <div id="datatable-responsive_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
          <div class="row">
            <div class="col-sm-10 col-sm-offset-1"> -->
              <table id="tablaComisionesConsultar" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%" role="grid" aria-describedby="datatable-responsive_info" style="width: 100%;">
                <thead>
                  <th>Número de póliza</th>
                  <th>Ramo</th>
                  <th>Aseguradora</th>
                  <th>Moneda</th>
                  <th>Monto prima</th>
                  <th>Acción</th>
                </thead>

              </table>
            <!-- </div>
          </div>
        </div> -->
      </div>
    <!-- </div> -->
  </div>

</div>
